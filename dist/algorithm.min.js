/*!
 * 🔪 algorithm.js - 🔪 一些前端常用的算法实现合集。
 * git+https://github.com/hai2007/algorithm.js.git
 *
 * author hai2007 < https://hai2007.gitee.io/sweethome >
 *
 * version 0.2.0
 *
 * Copyright (c) 2020-present hai2007 走一步，再走一步。
 * Released under the MIT license
 *
 * Date:Sat Nov 21 2020 23:39:10 GMT+0800 (GMT+08:00)
 */
(function(){"use strict";function n(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){n=function(e){return typeof e}}else{n=function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return n(e)}function e(e){var f=e||{},s,r;var a=function e(){var i=[],o=0,u=0;(function e(t,n){if(n>u)u=n;var r;for(r=0;r<t.children.length;r++){e(s[t.children[r]],n+1)}s[t.id].left=n+.5;if(r==0){if(i[n]==undefined)i[n]=-.5;if(i[n-1]==undefined)i[n-1]=-.5;s[t.id].top=i[n]+1;var a=i[n]+1+(s[t.pid].children.length-1)*.5;if(a-1<i[n-1])s[t.id].top=i[n-1]+1-(s[t.pid].children.length-1)*.5}else{s[t.id].top=(s[t.children[0]].top+s[t.children[r-1]].top)*.5}if(s[t.id].top<=i[n]){var l=i[n]+1-s[t.id].top;(function e(t,n){s[t].top+=l;if(i[n]<s[t].top)i[n]=s[t].top;var r;for(r=0;r<s[t].children.length;r++){e(s[t].children[r],n+1)}})(t.id,n)}i[n]=s[t.id].top;if(s[t.id].top+.5>o)o=s[t.id].top+.5})(s[r],0);return{node:s,root:r,size:o,deep:u+1}};var l=function e(l){var i={};var t=f.root(l),o,n;o=n=f.id(t);i[o]={data:t,pid:null,id:o,children:[]};var u=1;(function e(t,n){var r=f.child(t,l),a;u+=r?r.length:0;for(a=0;r&&a<r.length;a++){o=f.id(r[a]);i[n].children.push(o);i[o]={data:r[a],pid:n,id:o,children:[]};e(r[a],o)}})(t,o);return{value:[n,i],num:u}};var t=function e(t){var n=l(t);s=n.value[1];r=n.value[0];if(n.num==1){s[r].left=.5;s[r].top=.5;return{deep:1,node:s,root:r,size:1}}return a()};t.root=function(e){f.root=e;return t};t.child=function(e){f.child=e;return t};t.id=function(e){f.id=e;return t};return t}var v={blankReg:new RegExp("[\\x20\\t\\r\\n\\f]"),blanksReg:/^[\x20\t\r\n\f]{0,}$/};var t=Object.prototype.toString;function r(e){if(e==null){return e===undefined?"[object Undefined]":"[object Null]"}return t.call(e)}function a(e){var t=n(e);return t==="string"||t==="object"&&e!=null&&!Array.isArray(e)&&r(e)==="[object String]"}var h=a;function b(l){var i={},o=0;l=l.trim();var e=function e(){var t="",n="";for(;o<l.length;o++){if(v.blanksReg.test(l[o])||o==l.length-1){t+=l[o];if(!v.blanksReg.test(t)){i[t.trim()]=""}o+=1;break}else if(l[o]=="="){o+=1;var r=null,a=-1;if(l.substr(o,1)=='"'||l.substr(o,1)=="'"){r=l.substr(o,1);a=1;o+=1}else if(l.substr(o,2)=='"'||l.substr(o,2)=="'"){r=l.substr(o,2);a=2;o+=2}if(r!==null){for(;o<l.length;o++){if(l.substr(o,a)==r){i[t.trim()]=n.trim();o+=2;break}else{n+=l[o]}}}else{for(;o<l.length;o++){if(v.blanksReg.test(l[o])){i[t.trim()]=n.trim();o+=1;break}else{n+=l[o]}}}break}else{t+=l[o]}}if(o<l.length){e()}};e();return i}function m(f){var s=-1,p=null;var g=false,d="";var c=["script","pre","style","code"];var h=function e(){p=s++<f.length-1?f[s]:null;return p};var m=function e(t){return f.substring(s,t+s>f.length?f.length:t+s)};h();while(v.blankReg.test(p)&&s<f.length-1){h()}return function(){var e=p,t={};if(e==null)return null;if(g){t.type="textcode";t.tagName=e;while(m(d.length+3)!="</"+d+">"&&s<f.length){t.tagName+=h()}t.tagName=t.tagName.replace(/<$/,"");g=false;return t}if(m(4)=="\x3c!--"){t.type="comment";t.tagName=e;while(m(3)!="--\x3e"&&s<f.length){t.tagName+=h()}h();h();h();t.tagName=t.tagName.replace(/^<!--/,"").replace(/-$/,"");return t}if(m(9)=="<!DOCTYPE"){t.type="DOCTYPE";t.tagName=e;while(m(1)!=">"&&s<f.length){t.tagName+=h()}h();t.tagName=t.tagName.replace(/^<!DOCTYPE/,"").replace(/>$/,"");return t}else if(e=="<"){var n=false,r=null,a=null;while(n||p!=">"&&s<f.length){e+=h();if(n){var l=m(a+1).substring(1);if(l==r){n=false}}else{var i=m(2);if(i=='="'||i=="='"){r=i.replace("=","");a=1;n=true}i=m(3);if(i=='="'||i=="='"){r=i.replace("=","");a=2;n=true}}}if(/^<\//.test(e)){t.tagName=e.replace(/^<\//,"").replace(/>$/,"");t.type="endTag"}else{if(/\/>$/.test(e)){t.type="fullTag";e=e.replace(/\/>$/,"")}else{t.type="beginTag";e=e.replace(/>$/,"")}e=e.replace(/^</,"");t.tagName="";var o=0;for(;o<e.length;o++){if(e[o]==" ")break;t.tagName+=e[o]}var u=e.substring(o);if(v.blanksReg.test(u)){t.attrs={}}else{t.attrs=b(u)}}}else{t.type="textcode";t.tagName=p;while(m(1)!="<"&&s<f.length){t.tagName+=h()}t.tagName=t.tagName.replace(/<$/,"");s-=1}if(t.type=="beginTag"){if(c.indexOf(t.tagName.toLowerCase())>-1){g=true;d=t.tagName}}else if(t.type=="endTag"){if(c.indexOf(t.tagName.toLowerCase())>-1){g=false}}h();return t}}function y(e){e=l(e);var t=0,n=[];e.forEach(function(e){if(e.type=="beginTag"){n.push({type:"tag",name:e.tagName,attrs:e.attrs,__deep__:++t,__tagType__:"double"})}else if(e.type=="endTag"){t-=1}else if(e.type=="textcode"){n.push({type:"text",content:e.tagName,__deep__:t+1})}else if(e.type=="comment"){n.push({type:"comment",content:e.tagName,__deep__:t+1})}else{n.push({type:"tag",name:e.tagName,attrs:e.attrs,__deep__:t+1,__tagType__:"single"})}});return n}var l=function e(r){var a=[];r.forEach(function(e,t){if(e.type=="beginTag"){a.push([t,e.tagName])}else if(e.type=="endTag"){while(a.length>0){var n=a.pop();if(n[1]==e.tagName){break}else{r[n[0]].type="fullTag"}}}});return r};function i(e,t){if(!h(e))throw new Error("Template must be a String!");var n=m(e.trim());var r=n(),a=[];while(r!=null){if(r.type=="textcode"&&v.blanksReg.test(r.tagName));else if(r.type=="DOCTYPE");else if(r.type=="comment"){if(t){a.push(r)}}else{a.push(r)}r=n()}a=y(a);var l=[null],i=0;for(var o=0;o<a.length;o++){var u=o,f=a[o].__deep__;a[o].childNodes=[];a[o].preNode=null;a[o].nextNode=null;var s=l[l.length-1];var p=l.length>1?l[l.length-2]:null;if(f==i){a[u].preNode=s;a[s].nextNode=u;a[u].parentNode=p;a[p].childNodes.push(u);l[l.length-1]=u}else if(f>i){a[u].parentNode=s;if(s!=null)a[s].childNodes.push(u);l.push(u)}else{var g=l[l.length-1-(i-f)];var d=l[l.length-2-(i-f)];a[u].preNode=g;if(g!=null)a[g].nextNode=u;a[u].parentNode=d;if(d!=null)a[d].childNodes.push(u);for(var c=0;c<i-f;c++){l.pop()}l[l.length-1]=u}i=f}return a}var o=function e(t,n,r){console.log("开发中")};var u=function e(t,n,r,a){console.log("开发中")};var f={tree:e,xhtmlToJson:i,getValue:o,setValue:u};if((typeof module==="undefined"?"undefined":n(module))==="object"&&n(module.exports)==="object"){module.exports=f}else{window.algorithm=f}})();