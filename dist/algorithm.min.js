/*!
 * 🔪 algorithm.js - 🔪 一些前端常用的算法实现合集。
 * git+https://github.com/hai2007/algorithm.js.git
 *
 * author 你好2007 < https://hai2007.gitee.io/sweethome >
 *
 * version 0.6.2
 *
 * Copyright (c) 2020-present hai2007 走一步，再走一步。
 * Released under the MIT license
 *
 * Date:Mon Jun 14 2021 09:11:34 GMT+0800 (GMT+08:00)
 */
(function(){"use strict";function e(e){var u=e||{},o,r;var n=function(){var a=[],s=0,f=0;(function e(t,r){if(r>f)f=r;var n;for(n=0;n<t.children.length;n++)e(o[t.children[n]],r+1);o[t.id].left=r+.5;if(n==0){if(a[r]==undefined)a[r]=-.5;if(a[r-1]==undefined)a[r-1]=-.5;o[t.id].top=a[r]+1;var l=a[r]+1+(o[t.pid].children.length-1)*.5;if(l-1<a[r-1])o[t.id].top=a[r-1]+1-(o[t.pid].children.length-1)*.5}else{o[t.id].top=(o[t.children[0]].top+o[t.children[n-1]].top)*.5}if(o[t.id].top<=a[r]){var i=a[r]+1-o[t.id].top;(function e(t,r){o[t].top+=i;if(a[r]<o[t].top)a[r]=o[t].top;var n;for(n=0;n<o[t].children.length;n++){e(o[t].children[n],r+1)}})(t.id,r)}a[r]=o[t.id].top;if(o[t.id].top+.5>s)s=o[t.id].top+.5})(o[r],0);return{node:o,root:r,size:s,deep:f+1}};var l=function(i){var a={};var e=u.root(i),s,t;s=t=u.id(e);a[s]={data:e,pid:null,id:s,children:[]};var f=1;(function e(t,r){var n=u.child(t,i),l;f+=n?n.length:0;for(l=0;n&&l<n.length;l++){s=u.id(n[l]);a[r].children.push(s);a[s]={data:n[l],pid:r,id:s,children:[]};e(n[l],s)}})(e,s);return{value:[t,a],num:f}};var t=function(e){var t=l(e);o=t.value[1];r=t.value[0];if(t.num==1){o[r].left=.5;o[r].top=.5;return{deep:1,node:o,root:r,size:1}}return n()};t.root=function(e){u.root=e;return t};t.child=function(e){u.child=e;return t};t.id=function(e){u.id=e;return t};return t}var m={blankReg:new RegExp("[\\x20\\t\\r\\n\\f]"),blanksReg:/^[\x20\t\r\n\f]{0,}$/,identifier:/^[a-zA-Z_$][0-9a-zA-Z_$]{0,}$/};var t=Object.prototype.toString;function r(e){if(e==null){return e===undefined?"[object Undefined]":"[object Null]"}return t.call(e)}function n(e){var t=typeof e;return t==="string"||t==="object"&&e!=null&&!Array.isArray(e)&&r(e)==="[object String]"}var y=n;var f=function(e){return Array.isArray(e)};function c(l){var i={},a=0;l=l.trim();var s=function(){var e="",t="";for(;a<l.length;a++){if(m.blanksReg.test(l[a])||a==l.length-1){e+=l[a];if(!m.blanksReg.test(e)){i[e.trim()]=""}a+=1;break}else if(l[a]=="="){a+=1;var r=null,n=-1;if(l.substr(a,1)=='"'||l.substr(a,1)=="'"){r=l.substr(a,1);n=1;a+=1}else if(l.substr(a,2)=='"'||l.substr(a,2)=="'"){r=l.substr(a,2);n=2;a+=2}if(r!==null){for(;a<l.length;a++){if(l.substr(a,n)==r){i[e.trim()]=t.trim();a+=2;break}else{t+=l[a]}}}else{for(;a<l.length;a++){if(m.blanksReg.test(l[a])){i[e.trim()]=t.trim();a+=1;break}else{t+=l[a]}}}break}else{e+=l[a]}}if(a<l.length){s()}};s();return i}function v(f){var u=-1,o=null;var h=false,g="";var p=["script","pre","style","code"];var d=function(){o=u++<f.length-1?f[u]:null;return o};var v=function(e){return f.substring(u,e+u>f.length?f.length:e+u)};d();while(m.blankReg.test(o)&&u<f.length-1)d();return function(){var e=o,t={};if(e==null)return null;if(h){t.type="textcode";t.tagName=e;while(v(g.length+3)!="</"+g+">"&&u<f.length){t.tagName+=d()}t.tagName=t.tagName.replace(/<$/,"");h=false;return t}if(v(4)=="\x3c!--"){t.type="comment";t.tagName=e;while(v(3)!="--\x3e"&&u<f.length){t.tagName+=d()}d();d();d();t.tagName=t.tagName.replace(/^<!--/,"").replace(/-$/,"");return t}if(v(9)=="<!DOCTYPE"){t.type="DOCTYPE";t.tagName=e;while(v(1)!=">"&&u<f.length){t.tagName+=d()}d();t.tagName=t.tagName.replace(/^<!DOCTYPE/,"").replace(/>$/,"");return t}else if(e=="<"){var r=false,n=null,l=null;while((r||o!=">")&&u<f.length){e+=d();if(r){var i=v(l+1).substring(1);if(i==n){r=false}}else{var i=v(2);if(i=='="'||i=="='"){n=i.replace("=","");l=1;r=true}i=v(3);if(i=='="'||i=="='"){n=i.replace("=","");l=2;r=true}}}if(/^<\//.test(e)){t.tagName=e.replace(/^<\//,"").replace(/>$/,"");t.type="endTag"}else{if(/\/>$/.test(e)){t.type="fullTag";e=e.replace(/\/>$/,"")}else{t.type="beginTag";e=e.replace(/>$/,"")}e=e.replace(/^</,"");t.tagName="";var a=0;for(;a<e.length;a++){if(e[a]==" ")break;t.tagName+=e[a]}var s=e.substring(a);if(m.blanksReg.test(s)){t.attrs={}}else{t.attrs=c(s)}}}else{t.type="textcode";t.tagName=o;while(v(1)!="<"&&u<f.length){t.tagName+=d()}t.tagName=t.tagName.replace(/<$/,"");u-=1}if(t.type=="beginTag"){if(p.indexOf(t.tagName.toLowerCase())>-1){h=true;g=t.tagName}}else if(t.type=="endTag"){if(p.indexOf(t.tagName.toLowerCase())>-1){h=false}}d();return t}}function b(e){e=l(e);var t=0,r=[];e.forEach(function(e){if(e.type=="beginTag"){r.push({type:"tag",name:e.tagName,attrs:e.attrs,__deep__:++t,__tagType__:"double"})}else if(e.type=="endTag"){t-=1}else if(e.type=="textcode"){r.push({type:"text",content:e.tagName,__deep__:t+1})}else if(e.type=="comment"){r.push({type:"comment",content:e.tagName,__deep__:t+1})}else{r.push({type:"tag",name:e.tagName,attrs:e.attrs,__deep__:t+1,__tagType__:"single"})}});return r}var l=function(n){var l=[];n.forEach(function(e,t){if(e.type=="beginTag"){l.push([t,e.tagName])}else if(e.type=="endTag"){while(l.length>0){var r=l.pop();if(r[1]==e.tagName){break}else{n[r[0]].type="fullTag"}}}});return n};function i(e,t){if(!y(e))throw new Error("Template must be a String!");var r=v(e.trim());var n=r(),l=[];while(n!=null){if(n.type=="textcode"&&m.blanksReg.test(n.tagName));else if(n.type=="DOCTYPE");else if(n.type=="comment"){if(t){l.push(n)}}else{l.push(n)}n=r()}l=b(l);var i=[null],a=0;for(var s=0;s<l.length;s++){var f=s,u=l[s].__deep__;l[s].childNodes=[];l[s].preNode=null;l[s].nextNode=null;var o=i[i.length-1];var h=i.length>1?i[i.length-2]:null;if(u==a){l[f].preNode=o;l[o].nextNode=f;l[f].parentNode=h;l[h].childNodes.push(f);i[i.length-1]=f}else if(u>a){l[f].parentNode=o;if(o!=null)l[o].childNodes.push(f);i.push(f)}else{var g=i[i.length-1-(a-u)];var p=i[i.length-2-(a-u)];l[f].preNode=g;if(g!=null)l[g].nextNode=f;l[f].parentNode=p;if(p!=null)l[p].childNodes.push(f);for(var d=0;d<a-u;d++){i.pop()}i[i.length-1]=f}a=u}return l}var x=["+","-","*","/","%","&","|","!","?",":","[","]","(",")",">","<","="];var w=["+","-","*","/","%","&","|","!","?",":",">","<","=","<=",">=","==","===","!=","!=="];function u(e,t,r){t=t.trim();var n=-1,l=null;var i=function(){l=n++<t.length-1?t[n]:null;return l};var a=function(e){return t.substring(n,e+n>t.length?t.length:e+n)};i();var s=[];while(true){if(n>=t.length)break;if(x.indexOf(l)>-1){if(["&","|","="].indexOf(l)>-1){if(["==="].indexOf(a(3))>-1){s.push(a(3));n+=2;i()}else if(["&&","||","=="].indexOf(a(2))>-1){s.push(a(2));n+=1;i()}else{throw new Error("Illegal expression : "+t+"\nstep='analyseExpress',index="+n)}}else{if(["!=="].indexOf(a(3))>-1){s.push(a(3));n+=2;i()}else if([">=","<=","!="].indexOf(a(2))>-1){s.push(a(2));n+=1;i()}else{s.push(l);i()}}}else if(['"',"'"].indexOf(l)>-1){var f="",u=l;i();while(l!=u){if(n>=t.length){throw new Error("String unclosed error : "+t+"\nstep='analyseExpress',index="+n)}f+=l;i()}s.push(f+"@string");i()}else if(/\d/.test(l)){var o="no";var f=l;i();while(n<t.length){if(/\d/.test(l)){f+=l;if(o=="error")o="yes"}else if("."==l&&o=="no"){f+=l;o="error"}else{break}i()}if(o=="error")f+="0";s.push(+f)}else if(["null","true"].indexOf(a(4))>-1){s.push({null:null,true:true}[a(4)]);n+=3;i()}else if(["false"].indexOf(a(5))>-1){s.push({false:false}[a(5)]);n+=4;i()}else if(["undefined"].indexOf(a(9))>-1){s.push({undefined:undefined}[a(9)]);n+=8;i()}else if(m.blankReg.test(l)){do{i()}while(m.blankReg.test(l)&&n<t.length)}else{var h=false;if(l=="."){h=true;i()}if(m.identifier.test(l)){var g=1;while(n+g<=t.length&&m.identifier.test(a(g)))g+=1;if(h){s.push("[");s.push(a(g-1)+"@string");s.push("]")}else{var p=a(g-1);var d=p in r?r[p]:e[p];s.push(y(d)?d+"@string":d)}n+=g-2;i()}else{throw new Error("Illegal express : "+t+"\nstep='analyseExpress',index="+n)}}}var v=0;for(var c=0;c<s.length;c++){if(["+","-"].indexOf(s[c])>-1&&(c==0||w.indexOf(s[v-1])>-1)){s[v++]=+(s[c]+s[c+1]);c+=1}else{s[v++]=s[c]}}s.length=v;return s}var a=function(e){if(typeof e=="string")return e.replace(/@string$/,"");return e};var s=function(e){if(typeof e=="string")return e+"@string";return e};function o(e){var t=0,r=0;for(;r<e.length;r++){if(e[r]=="!"){e[t]=!e[++r]}else e[t]=e[r];t+=1}if(t==1)return a(e[0]);e.length=t;t=0;for(r=0;r<e.length;r++){if(e[r]=="*"){e[t-1]=a(e[t-1])*a(e[++r])}else if(e[r]=="/"){e[t-1]=a(e[t-1])/a(e[++r])}else if(e[r]=="%"){e[t-1]=a(e[t-1])%a(e[++r])}else{e[t++]=e[r]}}if(t==1)return a(e[0]);e.length=t;t=0;for(r=0;r<e.length;r++){if(e[r]=="+"){e[t-1]=s(a(e[t-1])+a(e[++r]))}else if(e[r]=="-"){e[t-1]=a(e[t-1])-a(e[++r])}else e[t++]=e[r]}if(t==1)return a(e[0]);e.length=t;t=0;for(r=0;r<e.length;r++){if(e[r]==">"){e[t-1]=a(e[t-1])>a(e[++r])}else if(e[r]=="<"){e[t-1]=a(e[t-1])<a(e[++r])}else if(e[r]=="<="){e[t-1]=a(e[t-1])<=a(e[++r])}else if(e[r]==">="){e[t-1]=a(e[t-1])>=a(e[++r])}else e[t++]=e[r]}if(t==1)return a(e[0]);e.length=t;t=0;for(r=0;r<e.length;r++){if(e[r]=="=="){e[t-1]=a(e[t-1])==a(e[++r])}else if(e[r]=="==="){e[t-1]=a(e[t-1])===a(e[++r])}else if(e[r]=="!="){e[t-1]=a(e[t-1])!=a(e[++r])}else if(e[r]=="!=="){e[t-1]=a(e[t-1])!==a(e[++r])}else e[t++]=e[r]}if(t==1)return a(e[0]);e.length=t;t=0;for(r=0;r<e.length;r++){if(e[r]=="&&"){e[t-1]=a(e[t-1])&&a(e[1+r]);r+=1}else if(e[r]=="||"){e[t-1]=a(e[t-1])||a(e[1+r]);r+=1}else e[t++]=e[r]}if(t==1)return a(e[0]);e.length=t;t=0;for(r=0;r<e.length;r++){if(e[r]=="?"){e[t-1]=a(e[t-1])?a(e[r+1]):a(e[r+3]);r+=3}else e[t++]=e[r]}if(t==1)return a(e[0]);e.length=t;throw new Error("Unrecognized expression : ["+e.toString()+"]")}function h(t,r,n){var e=r[0]in n?n[r[0]]:t[r[0]];for(var l=1;l<r.length;l++){try{e=e[r[l]]}catch(e){console.error({target:t,scope:n,expressArray:r,index:l});throw e}}return e}var g=function(e,t,r){if(t.indexOf("(")>-1){var n=[],l=[],i=0;for(var a=0;a<t.length;a++){if(t[a]=="("){if(i>0){l.push("(")}i+=1}else if(t[a]==")"){if(i>1)l.push(")");i-=1;if(i==0){var s=o(g(e,l));n.push(y(s)?s+"@string":s);l=[]}}else{if(i>0)l.push(t[a]);else n.push(t[a])}}t=n}return p(t)};var p=function(e){var t=true;while(t){t=false;var r=[],n=[],l=false;for(var i=0;i<e.length;i++){if(e[i]=="["&&i!=0&&e[i-1]!="]"){if(l){r.push("[");for(var a=0;a<n.length;a++)r.push(n[a])}else{l=true}n=[]}else if(e[i]=="]"&&l){t=true;var s=o(n);var f=r[r.length-1][s];r[r.length-1]=y(f)?f+"@string":f;l=false}else{if(l){n.push(e[i])}else{r.push(e[i])}}}e=r}return e};var d=function(e){var t=[],r=[];for(var n=0;n<e.length;n++){if(e[n]=="["){r=[]}else if(e[n]=="]"){t.push(o(r))}else{r.push(e[n])}}return t};function N(e,t,r){var n=g(e,t);var l;if(n[0]!="["){l=[o(n)]}else if(n[n.length-1]=="]"){l=d(n)}else{var i=n.lastIndexOf("]");var a=d(n.slice(0,i+1));var s=n.slice(i+1);s.unshift(h(e,a,r));l=[o(s)]}return l}var _=function(e,t,r){if(arguments.length<3)r={};var n=u(e,t,r);var l=N(e,n,r);if(l.length>1)throw new Error("Illegal expression : "+t+"\nstep='evalExpress',path="+l+",expressArray="+n);return l[0]};var O=function(e,t,r){if(arguments.length<3)r={};var n=u(e,t,r);var l=N(e,n,r);return h(e,l,r)};var k=function(e,t,r,n){if(arguments.length<3)n={};var l=u(e,t,n);var i=N(e,l,n);var a=e;for(var s=0;s<i.length-1;s++){if(!(i[s]in a))a[i[s]]=f(a)?[]:{};a=a[i[s]]}a[i[i.length-1]]=r;return e};function E(t){var r=-1,e=null;var n=function(){e=r++<t.length-1?t[r]:null;return e};var l=function(e){return t.substring(r,e+r>t.length?t.length:e+r)};var i=[];var a="";n();while(true){while(m.blankReg.test(e)){n()}if(e==null)break;if(l(2)=="/*"){n();n();a="/*";while(l(2)!="*/"&&e!=null){a+=e;n()}if(e==null){throw new Error("The comment is not closed.")}a+="*/";n();n();i.push({value:a,type:"comment-double"})}else if(l(2)=="//"){a="";while(e!="\n"&&e!=null){a+=e;n()}i.push({value:a,type:"comment-single"})}else if(e=="}"){i.push({value:"}",type:"end"});n()}else{a="";while(e!="{"&&e!=";"&&e!=null){a+=e;n()}if(e==null){throw new Error("Statement or code block missing closure.")}i.push({value:a+e,type:{"{":"begin",";":"statement"}[e]});n()}}return i}function T(e,t){var r=e[0],n,l,i;for(n=1;n<t;n++){var a=[];for(l=0;l<r.length;l++){for(i=0;i<e[n].length;i++){a.push(r[l]+e[n][i])}}r=a}return"\n"+r.join(",")+"{\n"}function $(e){var t=E(e);var r,n,l="",i=[],a=0;for(r=0;r<t.length;r++){if(t[r].type=="comment-double"){l+=t[r].value}else if(t[r].type=="comment-single"){l+="\n/* "+t[r].value+" */\n"}else if(t[r].type=="begin"){var s=t[r].value.split(",");var f=[];for(n=0;n<s.length;n++){f[n]=s[n].replace(/\{$/,"").trim();if(/^&/.test(f[n])){f[n]=f[n].replace(/^&/,"")}else{f[n]=" "+f[n]}}i[a]=f;a+=1}else if(t[r].type=="end"){a-=1}else if(t[r].type=="statement"){n=1;var u=t[r-n].type;while(["comment-double","comment-single"].indexOf(u)>-1){n+=1;u=t[r-n].type}if(["end","begin"].indexOf(u)>-1){l+=T(i,a)}l+="\n"+t[r].value+"\n";n=1;var o=t[r+n].type;while(["comment-double","comment-single"].indexOf(o)>-1){n+=1;o=t[r+n].type}if(["end","begin"].indexOf(o)>-1){l+="\n}\n"}}}return l}var R={tree:e,xhtmlToJson:i,evalExpress:_,getValue:O,setValue:k,scss:$};if(typeof module==="object"&&typeof module.exports==="object"){module.exports=R}else{window.algorithm=R}})();